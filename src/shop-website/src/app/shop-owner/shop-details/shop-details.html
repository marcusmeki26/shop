<section *ngIf="isInitialized" class="flex flex-col items-center">
  <div class="shop-details-container bg-white p-4 rounded-md">
    <!-- Add edit icon here and lalabas yung asa baba starting from edit details -->
    <div *ngIf="shop$ | async as shop" class="icon-description-container flex justify-between items-center">
      <div class="flex items-center gap-4">
        <img class="shop-icon" [src]="shopImg" alt="">
        <div class="flex flex-col gap-3 text-red-400">
          <div>
            <span class="font-bold text-3xl">{{ shop.shopName }}</span>
            â€¢ 
            <span class="text-2xl">{{ shop.phoneNumber }}</span>
          </div>
          <span class="text-xl">{{ shop.description }}</span>
        </div>
      </div>
      <img *ngIf="!isEditEnabled" (click)="editShop()" class="cursor-pointer" src="edit.svg" alt="edit icon">
    </div>
  </div>
  <div class="mt-3" *ngIf="isEditEnabled">
    <h1 class="bg-white border-sm p-4 border-b-4 border-red-400 text-2xl text-red-400">Edit Details</h1>
    <form class="mt-3 p-4 flex flex-col gap-3 bg-white border text-red-400 text-xl" [formGroup]="shopDetails" (ngSubmit)="updateShop()">
      <div *ngFor="let control of formControlsArray; let i = index">
        <div *ngIf="(control[0] != 'description') && (control[0] != 'shopImg'); else description;" class="flex flex-col gap-1">
          <label [for]="control[0]">{{ formLabel[i] }}</label>
          <input type="text" name="" [id]="control[0]" [formControlName]="control[0]" class="border border-red-400 p-1 rounded-md">
          <span *ngIf="shopDetails.get(control[0])?.invalid && isSubmitted" class="error-message">{{ formLabel[i] }} should have a value</span>
        </div>
        <ng-template #description>
          <div *ngIf="control[0] != 'shopImg'" class="flex flex-col gap-1">
            <label [for]="control[0]">{{ formLabel[i] }}</label>
            <textarea name="" [id]="control[0]" [formControlName]="control[0]" rows="5" class="border border-red-400 p-1 rounded-md w-full"></textarea>
            <span *ngIf="shopDetails.get(control[0])?.invalid && isSubmitted" class="error-message">{{ formLabel[i] }} should have a value</span>
          </div>
        </ng-template>
        <div *ngIf="i == formLabel.length-1" class="flex gap-2 mt-2 form-button-container items-center">
          <button class="save-btn bg-red-400 text-xl text-white rounded-md py-2" type="submit">Save</button>
          <button (click)="cancel()" class="cancel-btn text-xl rounded-md py-2" type="button">Cancel</button>
        </div>
      </div>
    </form>
  </div>
</section>
